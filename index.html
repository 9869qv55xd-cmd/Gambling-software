<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ultimate Virtual Casino</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --gold:#d4af37;
  --panel:#111;
  --red:#8b0000;
  --green:#006400;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Segoe UI,Arial,sans-serif;
  background:radial-gradient(circle at top,#222,#000);
  color:#eee;
  text-align:center;
}
.hidden{display:none}
h1,h2,h3{margin:0;padding:10px}
button{
  padding:10px 16px;
  margin:4px;
  border-radius:8px;
  border:1px solid #444;
  background:#222;
  color:#fff;
  cursor:pointer;
}
button:hover{border-color:var(--gold)}
button:disabled{opacity:.4}
input{
  padding:10px;
  font-size:16px;
  background:#000;
  color:#fff;
  border-radius:6px;
  border:1px solid #444;
}
.panel{
  max-width:1100px;
  margin:14px auto;
  padding:16px;
  background:var(--panel);
  border-radius:12px;
  border:1px solid #333;
}
.gold{color:var(--gold)}
.red{background:var(--red)}
.black{background:#000}
.green{background:var(--green)}
.admin{
  border:2px solid red;
  color:red;
  padding:4px 10px;
  border-radius:6px;
}

#lock,#lobby{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.box{
  background:#111;
  padding:30px;
  border-radius:14px;
  border:1px solid var(--gold);
  max-width:420px;
  width:100%;
}
#error{color:red;margin-top:10px}

#players p{margin:4px;font-size:18px}
#bet{font-size:22px;color:var(--gold)}
#output{font-size:20px;margin-top:10px}

#wheel{
  width:220px;
  height:220px;
  margin:14px auto;
  border-radius:50%;
  border:10px solid var(--gold);
  background:conic-gradient(
    #006400 0deg 10deg,
    #8b0000 10deg 190deg,
    #000 190deg 360deg
  );
  transition:transform 3.2s cubic-bezier(.2,.8,.2,1);
}

#rouletteTable{
  display:grid;
  grid-template-columns:repeat(12,1fr);
  gap:4px;
  margin-top:14px;
}
.cell{
  padding:10px;
  border-radius:6px;
  font-weight:bold;
  cursor:pointer;
}
@media(max-width:800px){
  #rouletteTable{grid-template-columns:repeat(6,1fr)}
}
</style>
</head>

<body>

<!-- ğŸ” LOCK -->
<div id="lock">
  <div class="box">
    <h2 class="gold">ğŸ” Casino Access</h2>
    <input id="code" type="password" placeholder="Access code">
    <br><br>
    <button onclick="unlock()">ENTER</button>
    <div id="error"></div>
  </div>
</div>

<!-- ğŸ‘¥ LOBBY -->
<div id="lobby" class="hidden">
  <div class="box">
    <h2 class="gold">ğŸ‘¥ Player Lobby</h2>
    <input id="playerName" placeholder="Player name">
    <br><br>
    <button onclick="addPlayer()">Add Player</button>
    <div id="playerList"></div>
    <br>
    <button onclick="startGame()">ğŸ° Start Game</button>
  </div>
</div>

<!-- ğŸ° CASINO -->
<div id="casino" class="hidden">

<h1>
  ğŸ° Ultimate Virtual Casino
  <span id="adminBadge" class="hidden admin">ADMIN MODE</span>
</h1>

<div class="panel">
  <div id="players"></div>
  <p>Current Bet: <span id="bet">0</span></p>
  <button onclick="addBet(5)">5</button>
  <button onclick="addBet(10)">10</button>
  <button onclick="addBet(25)">25</button>
  <button onclick="addBet(50)">50</button>
  <button onclick="addBet(100)">100</button>
  <button onclick="clearBet()">Clear</button>
</div>

<div class="panel">
  <button onclick="dice()">ğŸ² Dice</button>
  <button onclick="slots()">ğŸ° Slots</button>
  <button onclick="blackjack()">ğŸƒ Blackjack</button>
  <button onclick="toggleRoulette()">ğŸ¡ Roulette</button>
</div>

<div class="panel hidden" id="roulettePanel">
  <div id="wheel"></div>
  <div>
    <button class="red" onclick="betColor('red')">RED</button>
    <button class="black" onclick="betColor('black')">BLACK</button>
    <button onclick="betParity('odd')">ODD</button>
    <button onclick="betParity('even')">EVEN</button>
    <button onclick="betRange('low')">1â€“18</button>
    <button onclick="betRange('high')">19â€“36</button>
    <button class="green" onclick="betNumber(0)">0</button>
  </div>
  <div id="rouletteTable"></div>
</div>

<div class="panel hidden admin" id="adminPanel">
  <h3>ğŸ› ï¸ Admin Controls</h3>
  <button onclick="adminAddMoney(100)">+100 Player</button>
  <button onclick="adminAddMoneyAll(100)">+100 All</button>
  <button onclick="adminSkip()">Skip Turn</button>
  <button onclick="adminReset()">Restart</button>

  <hr>
  <h4>ğŸ” Change Codes</h4>
  <input id="newPlayerCode" placeholder="New Player Code">
  <br><br>
  <input id="newAdminCode" placeholder="New Admin Code">
  <br><br>
  <button onclick="changeCodes()">Update Codes</button>
</div>

<div class="panel">
  <div id="output"></div>
</div>

</div>

<script>
/* ğŸ” SECURITY */
let PLAYER_CODE="2580";
let ADMIN_CODE="7419";
let isAdmin=false,unlocked=false;
let attempts=0;
const MAX_ATTEMPTS=5;
let lockedUntil=0;

function unlock(){
  const now=Date.now();
  const input=document.getElementById("code");
  const error=document.getElementById("error");
  const code=input.value.trim();

  if(now<lockedUntil){
    error.innerText="â›” Locked. Try again later.";
    return;
  }

  if(code===PLAYER_CODE||code===ADMIN_CODE){
    unlocked=true;
    isAdmin=(code===ADMIN_CODE);
    attempts=0;
    lock.classList.add("hidden");
    lobby.classList.remove("hidden");
  }else{
    attempts++;
    input.value="";
    if(attempts>=MAX_ATTEMPTS){
      lockedUntil=Date.now()+30000;
      attempts=0;
      error.innerText="â›” Too many attempts. Locked 30s.";
    }else{
      error.innerText="âŒ Incorrect code";
    }
  }
}

document.addEventListener("keydown",e=>{
  if(!unlocked && e.key==="Enter") unlock();
});

/* ğŸ‘¥ LOBBY */
let players=[];
function addPlayer(){
  const n=playerName.value.trim();
  if(!n||players.length>=6)return;
  players.push({name:n,bal:100});
  playerName.value="";
  renderLobby();
}
function removePlayer(i){players.splice(i,1);renderLobby();}
function renderLobby(){
  playerList.innerHTML=players.map((p,i)=>`<p>${p.name} <button onclick="removePlayer(${i})">âŒ</button></p>`).join("");
}
function startGame(){
  if(players.length<1)return;
  lobby.classList.add("hidden");
  casino.classList.remove("hidden");
  if(isAdmin){
    adminPanel.classList.remove("hidden");
    adminBadge.classList.remove("hidden");
  }
  ui();
}

/* ğŸ° GAME CORE */
let turn=0,bet=0,spinning=false;
const redNums=[1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];

function ui(){
  playersDiv.innerHTML=players.map((p,i)=>`<p ${i===turn?'class="gold"':''}>${p.name}: ğŸ’°${p.bal}</p>`).join("");
  betSpan.innerText=bet;
}
const playersDiv=document.getElementById("players");
const betSpan=document.getElementById("bet");

function addBet(v){if(spinning)return;bet+=v;ui();}
function clearBet(){if(spinning)return;bet=0;ui();}
function canBet(){return bet>0&&players[turn].bal>=bet}
function win(x){players[turn].bal+=Math.floor(x*0.95)}
function lose(x){players[turn].bal-=x}

function endTurn(){
  if(players[turn].bal<=0){
    alert(players[turn].name+" is bankrupt!");
    location.reload();
  }
  bet=0;
  turn=(turn+1)%players.length;
  ui();
}
function output(t){outputDiv.innerText=t}
const outputDiv=document.getElementById("output");

/* ğŸ² GAMES */
function dice(){if(!canBet())return;Math.random()>.5?win(bet):lose(bet);output("ğŸ² Dice");endTurn();}
function slots(){if(!canBet())return;Math.random()>.85?win(bet*10):lose(bet);output("ğŸ° Slots");endTurn();}
function blackjack(){
  if(!canBet())return;
  let p=16+Math.random()*6,d=15+Math.random()*8;
  p<=21&&p>d?win(bet):lose(bet);
  output("ğŸƒ Blackjack");
  endTurn();
}

/* ğŸ¡ ROULETTE */
function toggleRoulette(){roulettePanel.classList.toggle("hidden")}
function betNumber(n){spin({t:"n",v:n})}
function betColor(c){spin({t:"c",v:c})}
function betParity(p){spin({t:"p",v:p})}
function betRange(r){spin({t:"r",v:r})}

function spin(b){
  if(!canBet()||spinning)return;
  spinning=true;
  document.querySelectorAll("button").forEach(x=>x.disabled=true);
  wheel.style.transform=`rotate(${Math.random()*360+1080}deg)`;

  setTimeout(()=>{
    const n=Math.floor(Math.random()*37);
    let winCond=false,m=2;
    if(b.t==="n"){winCond=n===b.v;m=14}
    if(b.t==="c"){
      winCond=b.v==="red"?redNums.includes(n):n!==0&&!redNums.includes(n);
    }
    if(b.t==="p"&&n!==0) winCond=b.v==="odd"?n%2:!(n%2);
    if(b.t==="r") winCond=b.v==="low"?n>=1&&n<=18:n>=19&&n<=36;

    winCond?win(bet*m):lose(bet);
    output("ğŸ¡ Roulette: "+n);
    spinning=false;
    document.querySelectorAll("button").forEach(x=>x.disabled=false);
    endTurn();
  },3200);
}

/* ğŸ› ï¸ ADMIN */
function adminAddMoney(x){players[turn].bal+=x;ui()}
function adminAddMoneyAll(x){players.forEach(p=>p.bal+=x);ui()}
function adminSkip(){endTurn()}
function adminReset(){location.reload()}
function changeCodes(){
  const p=newPlayerCode.value.trim();
  const a=newAdminCode.value.trim();
  if(p.length<4||a.length<4)return alert("Codes too short");
  PLAYER_CODE=p;
  ADMIN_CODE=a;
  newPlayerCode.value="";
  newAdminCode.value="";
  alert("Codes updated for this session");
}

/* BUILD TABLE */
const roulettePanel=document.getElementById("roulettePanel");
const wheel=document.getElementById("wheel");
(function(){
  const t=document.getElementById("rouletteTable");
  for(let i=1;i<=36;i++){
    const d=document.createElement("div");
    d.className="cell "+(redNums.includes(i)?"red":"black");
    d.innerText=i;
    d.onclick=()=>betNumber(i);
    t.appendChild(d);
  }
})();
</script>

</body>
</html>
